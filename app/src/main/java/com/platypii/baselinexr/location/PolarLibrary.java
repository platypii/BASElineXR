package com.platypii.baselinexr.location;

import java.util.Arrays;
import java.util.List;

public class PolarLibrary {

    public static class PolarPoint {
        public final double cl;
        public final double cd;
        
        public PolarPoint(double cl, double cd) {
            this.cl = cl;
            this.cd = cd;
        }
    }

    public static class WingsuitPolar {
        public final String polarId;
        public final String userId;
        public final String type;
        public final String name;
        public final boolean isPublic;
        public final double polarSlope;
        public final double polarClo;
        public final double polarMinDrag;
        public final double rangeMinCl;
        public final double rangeMaxCl;
        public final double[] aoaIndexes;
        public final double[] aoas;
        public final double[] cp;
        public final List<PolarPoint> stallPoint;
        public final double s; // wing area (m²)
        public final double m; // mass (kg)
        
        public WingsuitPolar(String polarId, String userId, String type, String name, boolean isPublic,
                           double polarSlope, double polarClo, double polarMinDrag, double rangeMinCl, double rangeMaxCl,
                           double[] aoaIndexes, double[] aoas, double[] cp, List<PolarPoint> stallPoint, double s, double m) {
            this.polarId = polarId;
            this.userId = userId;
            this.type = type;
            this.name = name;
            this.isPublic = isPublic;
            this.polarSlope = polarSlope;
            this.polarClo = polarClo;
            this.polarMinDrag = polarMinDrag;
            this.rangeMinCl = rangeMinCl;
            this.rangeMaxCl = rangeMaxCl;
            this.aoaIndexes = aoaIndexes;
            this.aoas = aoas;
            this.cp = cp;
            this.stallPoint = stallPoint;
            this.s = s;
            this.m = m;
        }
    }

    public static final List<PolarPoint> AURA_FIVE_STALL_POINT = Arrays.asList(
        new PolarPoint(0.108983764628346, 1.08733),
        new PolarPoint(0.185891612981445, 1.07550125),
        new PolarPoint(0.210159022016888, 1.04624),
        new PolarPoint(0.236338092608918, 1.00421875),
        new PolarPoint(0.276174302741996, 0.95411),
        new PolarPoint(0.321902830713497, 0.90058625),
        new PolarPoint(0.363958657340666, 0.848320000000001),
        new PolarPoint(0.400686482484531, 0.80198375),
        new PolarPoint(0.443431551630603, 0.77),
        new PolarPoint(0.501784571242392, 0.741),
        new PolarPoint(0.516614859906805, 0.735),
        new PolarPoint(0.533624176122725, 0.73),
        new PolarPoint(0.548480181747974, 0.72),
        new PolarPoint(0.564801482459875, 0.71),
        new PolarPoint(0.582677701039275, 0.7),
        new PolarPoint(0.602181355660182, 0.69),
        new PolarPoint(0.623365404678184, 0.68),
        new PolarPoint(0.646260864379027, 0.67),
        new PolarPoint(0.670874519347125, 0.66),
        new PolarPoint(0.70576750505298, 0.658),
        new PolarPoint(0.759140843806183, 0.67),
        new PolarPoint(0.810986085509315, 0.677),
        new PolarPoint(0.88072260117917, 0.695),
        new PolarPoint(0.965501597206807, 0.72),
        new PolarPoint(1.05011755421627, 0.74),
        new PolarPoint(1.1371, 0.747538425047438),
        new PolarPoint(1.15574082635108, 0.715249918087947),
        new PolarPoint(1.15539526148586, 0.674507873388006),
        new PolarPoint(1.14683928171753, 0.630877095494163),
        new PolarPoint(1.11365205723984, 0.578580118018614),
        new PolarPoint(1.08461323582186, 0.532820262727508),
        new PolarPoint(1.03921292555216, 0.485724926151704),
        new PolarPoint(0.973302723371025, 0.430756986106757),
        new PolarPoint(0.907945945116896, 0.377696088274903),
        new PolarPoint(0.855618188821683, 0.343913198706244),
        new PolarPoint(0.805163095460971, 0.313424543901754),
        new PolarPoint(0.761810592507725, 0.288863037567478),
        new PolarPoint(0.719519027870984, 0.266359012152287),
        new PolarPoint(0.677227463234242, 0.245293347914775),
        new PolarPoint(0.642590319337377, 0.229111816346851),
        new PolarPoint(0.601309850277438, 0.211086840529111),
        new PolarPoint(0.568285475029486, 0.197653553200295),
        new PolarPoint(0.510492818345571, 0.176255727765257),
        new PolarPoint(0.483132714445128, 0.167062404747948),
        new PolarPoint(0.461436881892194, 0.160200300064325),
        new PolarPoint(0.418045216786326, 0.147611714122478),
        new PolarPoint(0.385501467956925, 0.139163945163318),
        new PolarPoint(0.342109802851057, 0.129225147214071),
        new PolarPoint(0.298718137745189, 0.120800513832024),
        new PolarPoint(0.249388066223454, 0.11306209742444),
        new PolarPoint(0.207936707770252, 0.108072711176012),
        new PolarPoint(0.15266822983265, 0.103569627182967),
        new PolarPoint(0.0835826324106472, 0.101395214878043),
        new PolarPoint(0.0144970349886442, 0.103059072224655)
    );

    public static final double[] AURA_FIVE_AOAS = {
        90.0, 85.0, 80.0, 75.0, 70.0, 65.0, 60.0, 55.0, 50.0, 45.0, 44.0, 43.0, 42.0, 41.0, 40.0, 39.0, 38.0, 37.0, 36.0, 35.0,
        34.0, 33.0, 32.0, 31.0, 30.0, 28.0, 27.0, 26.0, 25.0, 24.0, 23.0, 22.0, 21.0, 20.0, 19.0, 18.0, 17.0, 16.0, 15.0, 14.0,
        13.0, 12.0, 11.0, 10.0, 9.0, 8.0, 7.0, 6.0, 5.0, 4.0, 3.0, 2.0, 1.0, 0.0
    };

    public static final double[] AURA_FIVE_AOA_INDEXES = {
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0973293002538006,
        0.111603420554605, 0.126644343855929, 0.142952948209109, 0.157392756917588,
        0.176072473739675, 0.192339895747025, 0.224200774751407, 0.241070606343121,
        0.255406594180041, 0.28703753161202, 0.313823164024654, 0.354610522808676,
        0.40272129228758, 0.469227952116029, 0.538110242647231, 0.654985426264267,
        0.846649581714156, 1
    };

    public static final double[] AURA_FIVE_CP = {
        0.901367256532332, 0.819922671799767, 0.81865591174113, 0.817549210804472,
        0.807584803437846, 0.7877449240893, 0.759011807206887, 0.722367687238658,
        0.678794798632662, 0.629275375836952, 0.618744343806472, 0.608022597661911,
        0.597117995278852, 0.586038394532879, 0.574791653299577, 0.563385629454531,
        0.551828180873325, 0.540127165431543, 0.52829044100477, 0.51632586546859,
        0.504241296698587, 0.492044592570347, 0.481452630223225, 0.475420516158898,
        0.469421112816359, 0.457459576274893, 0.451502244326367, 0.445584032972467,
        0.439735391686759, 0.433995116116988, 0.428408751771098, 0.423026997703251,
        0.417904110199851, 0.413096306465556, 0.408660168309301, 0.40465104583032,
        0.40112146110416, 0.398119511868704, 0.395687275210186, 0.393859211249218,
        0.392660566826802, 0.39210577919035, 0.392196879679709, 0.392921897413175,
        0.394253262973511, 0.396146212093973, 0.398537189344323, 0.401342251816851,
        0.404455472812395, 0.407747345526357, 0.411063186734725, 0.414221540480093,
        0.417012581757679, 0.419196520201342
    };

    public static final WingsuitPolar AURA_FIVE_POLAR = new WingsuitPolar(
        "21",           // polarId
        "",             // userId
        "Wingsuit",     // type
        "Aura 5",       // name
        true,           // isPublic
        0.402096647,    // polarSlope
        0.078987854,    // polarClo
        0.101386726,    // polarMinDrag
        0.000679916,    // rangeMinCl
        0.950065434,    // rangeMaxCl
        AURA_FIVE_AOA_INDEXES,  // aoaIndexes
        AURA_FIVE_AOAS,         // aoas
        AURA_FIVE_CP,           // cp
        AURA_FIVE_STALL_POINT,  // stallPoint
        2.0,            // s (wing area in m²)
        77.5            // m (mass in kg)
    );

    // IBEX UL POLAR DATA
    public static final List<PolarPoint> IBEX_UL_STALL_POINT = Arrays.asList(
        new PolarPoint(1.50156233073606, 0.621339321854312),
        new PolarPoint(1.4214823600746, 0.555508475044297),
        new PolarPoint(1.28030478984599, 0.439451501971458),
        new PolarPoint(1.09660826910347, 0.308490760384025),
        new PolarPoint(0.89857372855641, 0.224317766021849),
        new PolarPoint(0.637293812456098, 0.173363021339313),
        new PolarPoint(0.412789791326346, 0.161940008450298),
        new PolarPoint(0.245683247679096, 0.175801687940011)
    );

    public static final double[] IBEX_UL_AOAS = {
        90.0, 85.0, 80.0, 75.0, 70.0, 65.0, 60.0, 55.0, 50.0, 45.0, 40.0, 35.0, 30.0, 25.0, 20.0, 15.0, 10.0, 5.0, 0.0
    };

    public static final double[] IBEX_UL_AOA_INDEXES = {
        0.0328, 0.090625, 0.1792, 0.306475, 0.4804, 0.708925, 1.0, 1.0
    };

    public static final double[] IBEX_UL_CP = {
        0.37330676, 0.384385535, 0.396690654, 0.400570261, 0.401, 0.401, 0.401, 0.401
    };

    public static final WingsuitPolar IBEX_UL_POLAR = new WingsuitPolar(
        "ibex_ul",      // polarId
        "",             // userId
        "Canopy",       // type
        "Ibex UL",      // name
        true,           // isPublic
        1.6934221058100165,  // polarSlope
        0.35823772469396875, // polarClo
        0.19703077949220782, // polarMinDrag
        0.27644921307405346, // rangeMinCl
        0.975070024796286,   // rangeMaxCl
        IBEX_UL_AOA_INDEXES, // aoaIndexes
        IBEX_UL_AOAS,        // aoas
        IBEX_UL_CP,          // cp
        IBEX_UL_STALL_POINT, // stallPoint
        20.439,         // s (wing area in m²)
        77.5            // m (mass in kg)
    );

    // SLICK POLAR DATA
    public static final List<PolarPoint> SLICK_STALL_POINT = Arrays.asList(
        new PolarPoint(0.000886874740156584, 0.266),
        new PolarPoint(0.00954574621215812, 0.262326),
        new PolarPoint(0.0411271059912642, 0.24763),
        new PolarPoint(0.0737320219701223, 0.229259999999999),
        new PolarPoint(0.0987016226767307, 0.21089),
        new PolarPoint(0.121839807601175, 0.183335),
        new PolarPoint(0.127600541774028, 0.1540578125),
        new PolarPoint(0.112077801341776, 0.122484375),
        new PolarPoint(0.0597, 0.082494863)
    );

    public static final double[] SLICK_AOAS = {
        90.0, 75.0, 60.0, 50.0, 45.0, 40.0, 35.0, 25.0, 0.0
    };

    public static final double[] SLICK_AOA_INDEXES = {
        0.0, 0.02, 0.1, 0.2, 0.3, 0.45, 0.609375, 0.78125, 1.0
    };

    public static final double[] SLICK_CP = {
        0.47, 0.45, 0.435, 0.407, 0.395, 0.392, 0.398, 0.398, 0.403
    };

    public static final WingsuitPolar SLICK_POLAR = new WingsuitPolar(
        "slick",        // polarId
        "",             // userId
        "Slick",        // type
        "Slick Angles", // name
        true,           // isPublic
        0.7,            // polarSlope
        0.0,            // polarClo
        0.08,           // polarMinDrag
        0.0597,         // rangeMinCl
        0.128,          // rangeMaxCl
        SLICK_AOA_INDEXES, // aoaIndexes
        SLICK_AOAS,        // aoas
        SLICK_CP,          // cp
        SLICK_STALL_POINT, // stallPoint
        3.0,            // s (wing area in m²)
        70.0            // m (mass in kg)
    );

    // SAUSAGE POLAR DATA
    public static final List<PolarPoint> SAUSAGE_STALL_POINT = Arrays.asList(
        new PolarPoint(0.93, 0.877358490566038),
        new PolarPoint(1.09732045528581, 0.967450909161097),
        new PolarPoint(1.0336618828645, 0.742833381756323),
        new PolarPoint(0.932852905772069, 0.587816607007606),
        new PolarPoint(0.842648887430876, 0.494700222008605),
        new PolarPoint(0.677227622858224, 0.374891128274454),
        new PolarPoint(0.55, 0.310529041877838),
        new PolarPoint(0.376222157658236, 0.249753587851626),
        new PolarPoint(0.266114085159635, 0.224506025822303),
        new PolarPoint(0.191012995433623, 0.212533603764928),
        new PolarPoint(0.114981309594419, 0.204519436321175)
    );

    public static final double[] SAUSAGE_AOAS = {
        47.0, 43.0, 35.0, 29.0, 25.0, 19.0, 15.0, 10.0, 7.0, 5.0, 3.0
    };

    public static final double[] SAUSAGE_AOA_INDEXES = {
        -0.0465405259332095, 0.0, 0.0481228304489135, 0.101437064912317, 0.149348094679158,
        0.250319914254115, 0.348622419791551, 0.53431532180371, 0.701272874008315,
        0.843421351291316, 1.0
    };

    public static final double[] SAUSAGE_CP = {
        0.4182, 0.4054, 0.399, 0.3948, 0.394, 0.3928, 0.392, 0.394, 0.3952, 0.396, 0.3968
    };

    public static final WingsuitPolar SAUSAGE_POLAR = new WingsuitPolar(
        "sausage",      // polarId
        "",             // userId
        "OnePiece",     // type
        "Sausage",      // name
        true,           // isPublic
        1.854884093,    // polarSlope
        0.07421595,     // polarClo
        0.065124324,    // polarMinDrag
        0.0995875635479133, // rangeMinCl
        0.945361740818759,  // rangeMaxCl
        SAUSAGE_AOA_INDEXES, // aoaIndexes
        SAUSAGE_AOAS,        // aoas
        SAUSAGE_CP,          // cp
        SAUSAGE_STALL_POINT, // stallPoint
        1.0,            // s (wing area in m²)
        77.5            // m (mass in kg)
    );

    // BASELINE C-RACE POLAR DATA
    public static final List<PolarPoint> BASELINE_CRACE_STALL_POINT = Arrays.asList(
        new PolarPoint(0.749863687229952, 0.673606363104873),
        new PolarPoint(0.762573241250799, 0.622768147021484),
        new PolarPoint(0.889668781459266, 0.647031841061284),
        new PolarPoint(0.978635659605192, 0.631377844906575),
        new PolarPoint(0.953216551563499, 0.529564750868611),
        new PolarPoint(0.889668781459266, 0.423651800694888),
        new PolarPoint(0.762573241250799, 0.312850560513148),
        new PolarPoint(0.630648070514411, 0.235516371067648),
        new PolarPoint(0.564685485146217, 0.196849276344899),
        new PolarPoint(0.394553198410777, 0.132447267162435),
        new PolarPoint(0.358409423387875, 0.121609778238682),
        new PolarPoint(0.322822672129505, 0.111910016388761),
        new PolarPoint(0.287235920871134, 0.103194938808269),
        new PolarPoint(0.251649169612763, 0.0954472486593487),
        new PolarPoint(0.216468958982826, 0.0887349386269156),
        new PolarPoint(0.184873172787235, 0.0835045611251281),
        new PolarPoint(0.153683927220077, 0.079106202346167),
        new PolarPoint(0.12249468165292, 0.075440735296974),
        new PolarPoint(0.0913054360857624, 0.0725129166079597),
        new PolarPoint(0.0601161905186047, 0.0703389929518254)
    );

    public static final double[] BASELINE_CRACE_AOAS = {
        50.0, 45.0, 40.0, 35.0, 30.0, 25.0, 20.0, 16.0, 14.0, 10.0, 9.0, 8.0, 7.0, 6.0, 5.0, 4.0, 3.0, 2.0, 1.0, 0.0
    };

    public static final double[] BASELINE_CRACE_AOA_INDEXES = {
        -1.0, -0.924797753, -0.805194702, -0.714009595, -0.606677305, -0.484186591,
        -0.313115199, -0.122726783, 0.0, 0.128906904, 0.166705307, 0.209433259,
        0.259294097, 0.318301313, 0.388528138, 0.46502685, 0.558110877,
        0.674022397, 0.820050709, 1.0
    };

    public static final double[] BASELINE_CRACE_CP = {
        0.48, 0.49, 0.46, 0.45, 0.435, 0.42, 0.395, 0.387, 0.383, 0.375,
        0.38, 0.385, 0.39, 0.395, 0.4, 0.401, 0.401, 0.403, 0.404, 0.41
    };

    public static final WingsuitPolar BASELINE_CRACE_POLAR = new WingsuitPolar(
        "baseline_crace", // polarId
        "",             // userId
        "Wingsuit",     // type
        "C-Race",       // name
        true,           // isPublic
        0.432437014,    // polarSlope
        0.015598858,    // polarClo
        0.070579454,    // polarMinDrag
        0.060116191,    // rangeMinCl
        0.762573241,    // rangeMaxCl
        BASELINE_CRACE_AOA_INDEXES, // aoaIndexes
        BASELINE_CRACE_AOAS,        // aoas
        BASELINE_CRACE_CP,          // cp
        BASELINE_CRACE_STALL_POINT, // stallPoint
        2.0,            // s (wing area in m²)
        77.5            // m (mass in kg)
    );

    // CR+ POLAR DATA
    public static final WingsuitPolar CR_PLUS_POLAR = new WingsuitPolar(
        "cr_plus",      // polarId
        "",             // userId
        "Wingsuit",     // type
        "CR+",          // name
        true,           // isPublic
        0.445,          // polarSlope
        0.086,          // polarClo
        0.086,          // polarMinDrag
        0.103,          // rangeMinCl
        0.843,          // rangeMaxCl
        new double[] {0.0, 0.0328, 0.090625, 0.1792, 0.306475, 0.4804, 0.708925, 1.0}, // aoaIndexes (generic wingsuit)
        new double[] {35.0, 30.0, 25.0, 20.0, 15.0, 10.0, 5.0, 0.0}, // aoas (generic wingsuit)
        new double[] {0.47, 0.45, 0.435, 0.407, 0.395, 0.392, 0.398, 0.403}, // cp (generic wingsuit)
        Arrays.asList(), // stallPoint (empty - uses table instead)
        2.0,            // s (wing area in m²)
        77.5            // m (mass in kg)
    );

    // A6 POLAR DATA - Complete detailed arrays
    public static final List<PolarPoint> A6_STALL_POINT = Arrays.asList(
        new PolarPoint(0.48606250647903154, 0.48491872234292704),
        new PolarPoint(0.4991502662945565, 0.4688873481774529),
        new PolarPoint(0.5145284583655316, 0.45649159522234484),
        new PolarPoint(0.5321637980887397, 0.4475128138852817),
        new PolarPoint(0.5520230008609638, 0.4417323545739429),
        new PolarPoint(0.5740727820789865, 0.4389315676960075),
        new PolarPoint(0.5982798571395906, 0.4388918036591548),
        new PolarPoint(0.6246109414395591, 0.44139441287106396),
        new PolarPoint(0.6530327503756745, 0.44622074573941406),
        new PolarPoint(0.6835119993447203, 0.45315215267188447),
        new PolarPoint(0.7160154037434789, 0.46196998407615436),
        new PolarPoint(0.7505096789687327, 0.4724555903599026),
        new PolarPoint(0.7869615404172652, 0.4843903219308087),
        new PolarPoint(0.8253377034858592, 0.49755552919655194),
        new PolarPoint(0.8656048835712971, 0.5117325625648114),
        new PolarPoint(0.9077297960703621, 0.526702772443266),
        new PolarPoint(0.9516791563798364, 0.5422475092395952),
        new PolarPoint(0.9974196798965039, 0.5581481233614782),
        new PolarPoint(1.0449180820171469, 0.5741859652165943),
        new PolarPoint(1.0941410781385477, 0.5901423852126223),
        new PolarPoint(1.0941410781385477, 0.5901423852126223),
        new PolarPoint(1.0942654175775703, 0.5728756062390578),
        new PolarPoint(1.0903443357659475, 0.5549528342060487),
        new PolarPoint(1.0825548743392903, 0.53643043689576),
        new PolarPoint(1.0710740749332106, 0.5173647820903567),
        new PolarPoint(1.056078979183319, 0.49781223757200416),
        new PolarPoint(1.0377466287252268, 0.47782917112286727),
        new PolarPoint(1.0162540651945462, 0.4574719505251111),
        new PolarPoint(0.9917783302268876, 0.4367969435609007),
        new PolarPoint(0.9644964654578627, 0.4158605180124012),
        new PolarPoint(0.934585512523083, 0.39471904166177774),
        new PolarPoint(0.9022225130581591, 0.37342888229119525),
        new PolarPoint(0.8675845086987032, 0.3520464076828189),
        new PolarPoint(0.8308485410803261, 0.3306279856188139),
        new PolarPoint(0.7921916518386396, 0.30922998388134504),
        new PolarPoint(0.7517908826092542, 0.28790877025257755),
        new PolarPoint(0.7098232750277816, 0.2667207125146764),
        new PolarPoint(0.6664658707298335, 0.24572217844980687),
        new PolarPoint(0.6218957113510211, 0.22496953584013393),
        new PolarPoint(0.5762898385269551, 0.2045191524678226),
        new PolarPoint(0.5753352136073556, 0.20409921533334097),
        new PolarPoint(0.5422928736483156, 0.18999084085962237),
        new PolarPoint(0.5104515134268361, 0.17718033352331725),
        new PolarPoint(0.47978033859067226, 0.16556920502529518),
        new PolarPoint(0.4501561717308432, 0.15503319607154634),
        new PolarPoint(0.44252560397157303, 0.15242736424180928),
        new PolarPoint(0.4288709037707737, 0.14787474145903826),
        new PolarPoint(0.41176906111732164, 0.14237268214285492),
        new PolarPoint(0.39229103288971084, 0.1363769002595455),
        new PolarPoint(0.3711396345394531, 0.1301925771306599),
        new PolarPoint(0.34877504285027633, 0.12402335869347922),
        new PolarPoint(0.32553193184670987, 0.11801462749231387),
        new PolarPoint(0.30165294019653754, 0.11226909730875012),
        new PolarPoint(0.27728030436018436, 0.10685167862465028),
        new PolarPoint(0.2525186099703158, 0.10181010881564169),
        new PolarPoint(0.22739714100407807, 0.09717148018148415),
        new PolarPoint(0.20190753061085806, 0.09295509651839509),
        new PolarPoint(0.17599173376452637, 0.08917445548729182),
        new PolarPoint(0.17599121083636304, 0.0891743843515336),
        new PolarPoint(0.17529202839075453, 0.08914468530212394),
        new PolarPoint(0.1744906422317373, 0.08911088854619507),
        new PolarPoint(0.17359047163842514, 0.08907338919245207),
        new PolarPoint(0.1725949358899316, 0.08903258234959989),
        new PolarPoint(0.17150745426537045, 0.08898886312634359),
        new PolarPoint(0.17033144604385536, 0.0889426266313882),
        new PolarPoint(0.16907033050450013, 0.08889426797343877),
        new PolarPoint(0.1677275269264182, 0.08884418226120028),
        new PolarPoint(0.16630645458872342, 0.08879276460337776),
        new PolarPoint(0.16481053277052943, 0.08874041010867625),
        new PolarPoint(0.16324318075095, 0.08868751388580079),
        new PolarPoint(0.16160781780909877, 0.08863447104345636),
        new PolarPoint(0.15990786322408942, 0.08858167669034807),
        new PolarPoint(0.15814673627503564, 0.08852952593518089),
        new PolarPoint(0.15632785624105114, 0.08847841388665985),
        new PolarPoint(0.15445464240124962, 0.08842873565348996),
        new PolarPoint(0.1525305140347447, 0.0883808863443763),
        new PolarPoint(0.15055889042065013, 0.08833526106802386),
        new PolarPoint(0.14854319083807951, 0.08829225493313764),
        new PolarPoint(0.14648683456614667, 0.08825226304842271),
        new PolarPoint(0.14439324088396518, 0.08821568052258406),
        new PolarPoint(0.1422658290706488, 0.08818290246432677),
        new PolarPoint(0.1401080184053112, 0.08815432398235581),
        new PolarPoint(0.13792322816706612, 0.08813034018537626),
        new PolarPoint(0.13571487763502713, 0.0881113461820931),
        new PolarPoint(0.133486386088308, 0.08809773708121138),
        new PolarPoint(0.13124117280602243, 0.08808990799143612),
        new PolarPoint(0.12898265706728407, 0.08808825402147233),
        new PolarPoint(0.12671425815120657, 0.08809317028002507),
        new PolarPoint(0.12443939533690368, 0.08810505187579934),
        new PolarPoint(0.1221614879034891, 0.08812429391750018),
        new PolarPoint(0.11988395513007649, 0.0881512915138326),
        new PolarPoint(0.11761021629577956, 0.08818643977350166),
        new PolarPoint(0.11534369067971198, 0.08823013380521236),
        new PolarPoint(0.11308779756098745, 0.08828276871766971),
        new PolarPoint(0.11084595621871964, 0.08834473961957878),
        new PolarPoint(0.10862158593202229, 0.08841644161964456),
        new PolarPoint(0.106418105980009, 0.0884982698265721),
        new PolarPoint(0.10423893564179354, 0.08859061934906641),
        new PolarPoint(0.10208749419648956, 0.08869388529583253),
        new PolarPoint(0.09996720092321076, 0.08880846277557547),
        new PolarPoint(0.09788147510107084, 0.08893474689700026),
        new PolarPoint(0.09583373600918346, 0.08907313276881193),
        new PolarPoint(0.09382740292666233, 0.08922401549971554),
        new PolarPoint(0.09186589513262114, 0.08938779019841606),
        new PolarPoint(0.08995263190617359, 0.08956485197361853),
        new PolarPoint(0.08809103252643334, 0.08975559593402802),
        new PolarPoint(0.08628451627251409, 0.08996041718834949),
        new PolarPoint(0.08453650242352953, 0.09017971084528802)
    );

    public static final double[] A6_AOAS = {
        45.70673512375706, 43.37453933415766, 41.22897438330346, 39.292431317868406, 37.557841672083285, 36.117933119970026, 34.83565537360632, 33.7430182644832, 32.7922220131467, 31.991781265392948, 31.25033716602148, 30.64919489490603, 30.102494518836842, 29.585648547650962, 29.10900823190319, 28.696982162138777, 28.288270968467117, 27.875591308196377, 27.451841225351032, 27.06192834057164,
        27.06192834057164, 26.43842609966141, 25.831312734040402, 25.104687694891503, 24.38038939937626, 23.70276610907475, 23.05094716060096, 22.414524045474366, 21.785106209084393, 21.15692707649924, 20.52628446459126, 19.889179411545463, 19.234718756603534, 18.5623020519975, 17.866198649499676, 17.137808816238266, 16.35350316827847, 15.503330193660549, 14.555328323812008, 13.449724324855437,
        13.426012001749525, 12.528278176118965, 11.654013273071874, 10.80924473392623, 10.0, 9.785974631870534, 9.467852456626332, 9.057880157457355, 8.56830441755358, 8.01137192010497, 7.399329348301502, 6.744423385333139, 6.0589007143898534, 5.3550080186616125, 4.6449919813383875, 3.9410992856101466, 3.2555766146668605, 2.6006706516984983, 2.6006839138804256, 2.5816885477295513,
        2.5598898166255464, 2.535357496205945, 2.5081638419276318, 2.4783811016035253, 2.4460816572664763, 2.4113381610704034, 2.3742236652642146, 2.334811746236425, 2.2931766225926635, 2.249393267194725, 2.2035375130581603, 2.1556861529759446, 2.1059170327083794, 2.0543091375541658, 2.000942672094847, 1.954922555667311, 1.9102454575099626, 1.864377277320175, 1.817385644166229, 1.7693393759114808,
        1.7203085056137524, 1.6703643010642966, 1.6195792772378135, 1.5680272014288785, 1.5157830908570784, 1.4629232025332806, 1.4146391488237602, 1.3732048370087693, 1.331478342693413, 1.2895219457680893, 1.2473987469259633, 1.2051726215557093, 1.1629081670007568, 1.1206706431822033, 1.07852590661376, 1.0365403378705726, 0.9947807626092763, 0.9533143662741498, 0.9200152635085141, 0.8899543515568794,
        0.8602599497214317, 0.830982053456671, 0.8021705445050823, 0.7738751036324739, 0.7461451202404117, 0.7190295991990889, 0.6925770652728475, 0.6668354655379931
    };

    public static final double[] A6_AOA_INDEXES = {
        -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0,
        -1.0, -1.0, -1.0, 0.0, 0.0, 0.0014878027138943706, 0.003692905472505892, 0.0066182427729666315,
        0.010274558586595206, 0.014680643409582528, 0.019863791415150822, 0.025860508474286892,
        0.032717515288596566, 0.04049310830855746, 0.04925896642004102, 0.059102526656338306,
        0.07013010226486138, 0.08247098893921057, 0.09628291210192463, 0.11175932970839408,
        0.12913935450531278, 0.1487214544733798, 0.17088273233098128, 0.19610666196310167,
        0.19666582278912992, 0.2168594322256, 0.23801988377582994, 0.26022696732001915, 0.2836455183287985,
        0.29002849380598383, 0.30184235157315065, 0.31739836905732544, 0.3362454911979641, 0.35823439845719307,
        0.38344108111011954, 0.4120898777848344, 0.4445566959654301, 0.4814400801618831, 0.5235487296253247,
        0.5720600578673727, 0.6286078614224788, 0.6955116707696578, 0.6955131316153513, 0.6973836458579163,
        0.6995369014994739, 0.7019673074557655, 0.7046695944224557, 0.7076387698855615, 0.7108700743764873,
        0.714358938623493, 0.7181009412776549, 0.7220917669156028, 0.7263271640442563, 0.7308029028550822,
        0.7355147324978228, 0.7404583376668497, 0.745629294318074, 0.7510230243614356, 0.7566347492041735,
        0.7624594420542322, 0.7684917789320268, 0.774726088383319, 0.7811562999368545, 0.7877758914085767,
        0.7945778352202398, 0.8015545439747503, 0.8086978156138446, 0.8159987785759155, 0.8234478374725906,
        0.8310346199113503, 0.8387479252066705, 0.8465756758419252, 0.8545048726657143, 0.8625215549256517,
        0.8706107663552364, 0.8787565286293696, 0.8869418235846083, 0.8951485856534773, 0.9033577059795955,
        0.9115490496529188, 0.9197014874230139, 0.9277929431044163, 0.9358004576745637, 0.9437002707763568,
        0.9514679199720061, 0.9590783576543116, 0.9665060850125513, 0.9737253018849308, 0.9807100707260755,
        0.9874344923002737, 0.993872890108198, 1.0
    };

    public static final double[] A6_CP = {
        0.6051175752498958, 0.5776212024430096, 0.5514472885778359, 0.5316103492950068, 0.5160564538748804,
        0.5038611770759397, 0.4936426601205397, 0.48541697696719893, 0.478458340434897, 0.47290012024303746,
        0.467928353907248, 0.4638973839270628, 0.4604699201428286, 0.4573038601935462, 0.454384089317825,
        0.45186012800194547, 0.4495210915106689, 0.4472199439603025, 0.4448570665059899, 0.4426828690205171,
        0.4426828690205171, 0.4393475158188597, 0.4362793810757262, 0.4326072768953758, 0.42919745048869623,
        0.4261105203390069, 0.42317245850731594, 0.42057643214609325, 0.41800898093846844, 0.4155646081356325,
        0.4132805885122978, 0.410973163647873, 0.40884513325266997, 0.40670628176148466, 0.40464756480477526,
        0.40264182082446703, 0.4006509364316404, 0.3986639253609681, 0.3967842946837434, 0.3949124392400795,
        0.3948763666657631, 0.39366324263473695, 0.39276123150060027, 0.39219683798419386, 0.392,
        0.39207465760524074, 0.3922971560793683, 0.39265308013347633, 0.3931222361454322, 0.3936827701332322,
        0.39431233556641687, 0.39498855347245937, 0.3956891653622101, 0.39639032113568795, 0.39707193465821666,
        0.39771407549294413, 0.39829821949346544, 0.3988079249466836, 0.3988079152992173, 0.3988217333237103,
        0.3988375906332204, 0.3988554364700279, 0.398875218272489, 0.3988968834845201, 0.39892037945240066,
        0.3989456533259126, 0.39897265196379206, 0.39900132184349413, 0.39903160897529827, 0.39906345882080635,
        0.39909525727747136, 0.39912523644282405, 0.39915641709648564, 0.3991887497536907, 0.3992221841657857,
        0.39925101604595714, 0.39927900651709186, 0.3993077432082951, 0.3993371837495482, 0.3993672850260451,
        0.3993980031616533, 0.3994292935066722, 0.3994611106300334, 0.39948760033717734, 0.39951372239246324,
        0.39954015233662515, 0.3995642943634799, 0.3995850115193874, 0.3996058747665451, 0.3996268529650078,
        0.39964791456442883, 0.3996690276271139, 0.39969015985439144, 0.3997112786163007, 0.3997323509845849,
        0.39975314719573113, 0.39976729992819965, 0.39978135329943465, 0.39979263869421977, 0.39980282663415806,
        0.39981289036019835, 0.3998228129283874, 0.39983257743331, 0.39984216703766406, 0.39985156500289354,
        0.399860754720764, 0.3998697197457536, 0.3998784438281246
    };

    public static final WingsuitPolar A6_POLAR = new WingsuitPolar(
        "a6",           // polarId
        "",             // userId
        "Wingsuit",     // type
        "A6",           // name
        true,           // isPublic
        0.38,           // polarSlope
        -0.003,         // polarClo
        0.077,          // polarMinDrag
        0.167,          // rangeMinCl
        0.884,          // rangeMaxCl
        A6_AOA_INDEXES, // aoaIndexes (104 points)
        A6_AOAS,        // aoas (104 points)
        A6_CP,          // cp (104 points)
        A6_STALL_POINT, // stallPoint (104 points)
        2.0,            // s (wing area in m²)
        77.5            // m (mass in kg)
    );

    // CARAVAN POLAR DATA
    public static final List<PolarPoint> CARAVAN_STALL_POINT = Arrays.asList(
        new PolarPoint(0.5165430339613966, 0.07239915450672128),
        new PolarPoint(0.5029615742827824, 0.06856977008347245),
        new PolarPoint(0.48909280298470004, 0.06484394502252835),
        new PolarPoint(0.4750908507796766, 0.061271536767406556),
        new PolarPoint(0.4610754308424907, 0.057886066498164815),
        new PolarPoint(0.4471333352248565, 0.05470728148458934),
        new PolarPoint(0.4333274133435328, 0.0517452695322978),
        new PolarPoint(0.41969806839500734, 0.049002425136722746),
        new PolarPoint(0.4062692430142357, 0.04647609581822054),
        new PolarPoint(0.3930484192746416, 0.04415971164565156),
        new PolarPoint(0.38003709359090987, 0.04204550705082559),
        new PolarPoint(0.36722179823087775, 0.04012361672672921),
        new PolarPoint(0.3545845762183286, 0.03838437149203297),
        new PolarPoint(0.3421014849183067, 0.03681836636083074),
        new PolarPoint(0.32973511396369376, 0.035415985741904646),
        new PolarPoint(0.3264993358665586, 0.03507351540292367),
        new PolarPoint(0.320631060334466, 0.0344783263126852),
        new PolarPoint(0.3131757453331217, 0.03377032919142504),
        new PolarPoint(0.3045275799315623, 0.033016570298433676),
        new PolarPoint(0.29490936664706946, 0.032263440513521396),
        new PolarPoint(0.2844667840486348, 0.03154732238772506),
        new PolarPoint(0.2732820976811008, 0.0308975866998465),
        new PolarPoint(0.26138787098930094, 0.030339716736794725),
        new PolarPoint(0.2487755346456475, 0.029898014037618752),
        new PolarPoint(0.2353911018863376, 0.02959796306706299),
        new PolarPoint(0.2211283130492831, 0.029469395833047238)
    );

    public static final double[] CARAVAN_AOAS = {
        22.36810391019099, 21.567190131214463, 20.729470861641637, 19.860973542790497, 18.967725615979003, 18.05575452252515, 17.1310877037469, 16.19975260096224, 15.26777665548914, 14.341187308645575, 13.426012001749525, 12.528278176118965, 11.654013273071874, 10.80924473392623, 10.0, 9.785974631870534, 9.467852456626332, 9.057880157457355, 8.56830441755358, 8.01137192010497, 7.399329348301502, 6.744423385333139, 6.0589007143898534, 5.3550080186616125, 4.6449919813383875, 3.9410992856101466
    };

    public static final double[] CARAVAN_AOA_INDEXES = {
        0.0, 0.02584602497910915, 0.053301270010354784, 0.08218863382357977, 0.11236860646815716, 0.1437442946215568,
        0.1762504260046479, 0.20985801470475363, 0.24456823497549784, 0.2804204781487116, 0.317471640678638,
        0.3558278038437417, 0.39562264208757336, 0.4370284024706963, 0.4802914063472369, 0.4920061469263761,
        0.5136918185308401, 0.5420960052078937, 0.5763116866183347, 0.6160756702196375, 0.6614521303382338,
        0.7128304814119495, 0.7709396415189791, 0.8369059462954722, 0.912418437241464, 1.0
    };

    public static final double[] CARAVAN_CP = {
        0.4335454619403396, 0.4284531235418372, 0.4236779013904263, 0.4188763601209258, 0.4143865383474914,
        0.4102030860729039, 0.40628949904819345, 0.4028445250043731, 0.3998956488561748, 0.3973856426552619,
        0.3953531619560726, 0.3938154127962302, 0.3927671705523868, 0.39217975945246836, 0.392,
        0.39207465760524074, 0.3922971560793683, 0.39265308013347633, 0.3931222361454322, 0.3936827701332322,
        0.39431233556641687, 0.39498855347245937, 0.3956891653622101, 0.39639032113568795, 0.39707193465821666,
        0.39771407549294413
    };

    public static final WingsuitPolar CARAVAN_POLAR = new WingsuitPolar(
        "caravan",      // polarId
        "",             // userId
        "Airplane",     // type
        "Caravan",      // name
        true,           // isPublic
        0.484813091400691,          // polarSlope
        0.21896316379267053,        // polarClo
        0.029467123091668542,       // polarMinDrag
        0.21741522340551012,        // rangeMinCl
        0.5258731795206912,         // rangeMaxCl
        CARAVAN_AOA_INDEXES,        // aoaIndexes
        CARAVAN_AOAS,               // aoas
        CARAVAN_CP,                 // cp
        CARAVAN_STALL_POINT,        // stallPoint
        2.0,            // s (wing area in m²)
        77.5            // m (mass in kg)
    );

    /**
     * Convert measured KL/KD coefficients to Angle of Attack (AOA) in degrees
     * Uses atmospheric model for density calculation and specified polar parameters
     *
     * @param kl Measured lift coefficient (from Kalman filter)
     * @param kd Measured drag coefficient (from Kalman filter)
     * @param altitudeGps GPS altitude in meters
     * @param polar Wingsuit polar data containing s (wing area) and m (mass)
     * @return AOA in degrees, clamped between 0 and 30 degrees
     */
    public static double convertKlKdToAOA(double kl, double kd, double altitudeGps, WingsuitPolar polar) {
        // Constants
        final double GRAVITY = 9.80665; // m/s²
        final double TEMP_OFFSET = 10.0f; // Temperature offset in degrees C

        // Calculate atmospheric density using altitude + 10°C temperature offset
        final double rho = AtmosphericModel.calculateDensity((float)altitudeGps, 10);

        // Calculate k factor: k = 0.5 * rho * s / m
        final double k = 0.5 * rho * polar.s / polar.m;

        // Convert KL/KD to CL/CD: cl = kl / k * gravity, cd = kd / k * gravity
        final double cl = kl / k * GRAVITY;
        final double cd = kd / k * GRAVITY;

        // Calculate AOA using formula: aoadeg = 20.874*sqrt(cl^2+cd^2) - 1.1733
        final double clcdMagnitude = Math.sqrt(cl * cl + cd * cd);
        final double aoaDeg = 20.874 * clcdMagnitude - 1.1733;

        // Clamp between 0 and 30 degrees
        return Math.max(0.0, Math.min(35.0, aoaDeg));
    }
}